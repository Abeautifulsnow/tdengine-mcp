# Smithery configuration file: https://smithery.ai/docs/config#smitheryyaml

startCommand:
  type: stdio
  configSchema:
    # JSON Schema defining the configuration options for the MCP.
    type: object
    required:
      - taosUser
      - taosPassword
      - taosDatabase
    properties:
      logLevel:
        type: string
        default: DEBUG
        description: The log level to use.
      taosHost:
        type: string
        default: localhost
        description: The hostname of the taos server. Use localhost for local
          connections or a specific address for remote databases. For Docker,
          host.docker.internal allows accessing the host machine.
      taosPort:
        type: number
        default: 6041
        description: "The port of the taos server (default: 6041)."
      taosUser:
        type: string
        default: root
        description: The username for taos authentication.
      transport:
        type: string
        default: stdio
        description: The transport to use.
      taosTimeout:
        type: number
        default: 30
        description: The timeout for the taos connection.
      taosDatabase:
        type: string
        default: log
        description: The database to connect to.
      taosPassword:
        type: string
        default: taosdata
        description: The password for taos authentication.
  commandFunction:
    # A JS function that produces the CLI command based on the given config to start the MCP on stdio.
    |-
    (config) => ({ 
      command: 'tdengine-mcp-server', 
      args: [],
      env: {
        TDENGINE_HOST: config.taosHost,
        TDENGINE_PORT: config.taosPort,
        TDENGINE_USERNAME: config.taosUser,
        TDENGINE_PASSWORD: config.taosPassword,
        TDENGINE_DATABASE: config.taosDatabase,
        TDENGINE_TIMEOUT: config.taosTimeout,
        LOG_LEVEL: config.logLevel,
        TRANSPORT: config.transport
      }
    })
